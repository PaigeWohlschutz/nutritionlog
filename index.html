<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- SECTION: Meta -->
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Marathon Fuel Log</title>

    <!-- SECTION: Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <!-- SECTION: Styles -->
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <!-- SECTION: App Shell -->
    <div class="app-shell">
      <!-- SECTION: Header -->
      <header class="app-header">
        <div class="brand">
          <span class="brand-mark">42K</span>
          <div class="brand-text">
            <h1 class="app-title">Marathon Fuel Log</h1>
            <p class="app-subtitle">Track every meal. Coach every mile.</p>
          </div>
        </div>

        <div class="header-controls">
          <div class="week-selector">
            <label for="weekSelect">Week of training</label>
            <select id="weekSelect">
              <option value="current">Current week</option>
              <option value="race-week">Race week</option>
              <option value="custom">Custom block</option>
            </select>
          </div>

          <div class="view-toggle" role="tablist" aria-label="View mode">
            <button
              id="athleteViewBtn"
              class="chip chip-active"
              data-view="athlete"
              role="tab"
              aria-selected="true"
            >
              Athlete view
            </button>
            <button
              id="coachViewBtn"
              class="chip"
              data-view="coach"
              role="tab"
              aria-selected="false"
            >
              Coach view
            </button>
          </div>
        </div>
      </header>

      <!-- SECTION: Main Content -->
      <main class="app-main">
        <!-- SECTION: Athlete View -->
        <section
          id="athleteView"
          class="panel panel-active"
          aria-label="Athlete meal logging"
          aria-hidden="false"
        >
          <div class="layout-grid">
            <!-- SECTION: Meal Form -->
            <section class="card card-form" aria-labelledby="mealFormHeading">
              <header class="card-header">
                <h2 id="mealFormHeading">Log a meal</h2>
                <p class="card-support-text">
                  Keep it simple and honest. Your coach sees exactly what you fuel with.
                </p>
              </header>

              <form id="mealForm" class="meal-form">
                <!-- SECTION: Basic Info Row -->
                <div class="form-row">
                  <div class="field-group meal-description-group">
                    <label for="mealDescription">Meal description</label>
                    <input
                      id="mealDescription"
                      name="description"
                      type="text"
                      autocomplete="off"
                      placeholder="Oatmeal, banana, peanut butter"
                      required
                    />
                    <ul id="mealDescriptionSuggestions" class="suggestions-list" aria-label="Recipe suggestions" aria-live="polite"></ul>
                  </div>
                </div>

                <div class="form-row">
                  <div class="field-group">
                    <label for="mealType">Meal type</label>
                    <select id="mealType" name="type" required>
                      <option value="">Select…</option>
                      <option value="breakfast">Breakfast</option>
                      <option value="pre-run">Pre-run</option>
                      <option value="post-run">Post-run</option>
                      <option value="lunch">Lunch</option>
                      <option value="dinner">Dinner</option>
                      <option value="snack">Snack</option>
                    </select>
                  </div>

                  <div class="field-group">
                    <label for="mealTime">Time</label>
                    <input
                      id="mealTime"
                      name="time"
                      type="time"
                      required
                    />
                  </div>
                </div>

                <!-- SECTION: Nutrition Row (Canada Food Guide style) -->
                <div class="form-row">
                  <div class="field-group">
                    <label for="foodCategory">Food category</label>
                    <select id="foodCategory" name="foodCategory" required>
                      <option value="">Select…</option>
                      <option value="vegetables">Vegetables and fruits</option>
                      <option value="grains">Whole grain foods</option>
                      <option value="protein">Protein foods</option>
                      <option value="mixed">Mixed meal (combo)</option>
                    </select>
                  </div>

                  <div class="field-group">
                    <label for="portionSize">Portion size</label>
                    <select id="portionSize" name="portionSize" required>
                      <option value="">Select…</option>
                      <option value="0.5">Half plate / small portion</option>
                      <option value="1">One plate / standard portion</option>
                      <option value="1.5">Hearty portion</option>
                      <option value="2">Two plates / large portion</option>
                    </select>
                  </div>
                </div>

                <!-- SECTION: Auto nutrition (calories & macros) -->
                <div class="form-row">
                  <div class="field-group field-group-full">
                    <span class="field-group-label">Estimated nutrition (auto)</span>
                    <p class="field-hint">
                      Based on Canada Food Guide style portions. These values auto-fill; you can override any of them.
                    </p>

                    <div class="auto-nutrition-grid">
                      <div class="field-group">
                        <label for="calories">Calories (auto)</label>
                        <input
                          id="calories"
                          name="calories"
                          type="number"
                          min="0"
                          inputmode="numeric"
                          placeholder="Estimated from category"
                        />
                      </div>

                      <div class="field-group macros-group">
                        <div class="macro-field">
                          <label for="carbs">Carbs (g)</label>
                          <input
                            id="carbs"
                            name="carbs"
                            type="number"
                            min="0"
                            inputmode="numeric"
                            placeholder="Auto"
                          />
                        </div>
                        <div class="macro-field">
                          <label for="protein">Protein (g)</label>
                          <input
                            id="protein"
                            name="protein"
                            type="number"
                            min="0"
                            inputmode="numeric"
                            placeholder="Auto"
                          />
                        </div>
                        <div class="macro-field">
                          <label for="fat">Fat (g)</label>
                          <input
                            id="fat"
                            name="fat"
                            type="number"
                            min="0"
                            inputmode="numeric"
                            placeholder="Auto"
                          />
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- SECTION: Feel Row -->
                <div class="form-row">
                  <div class="field-group">
                    <label for="feel">How did you feel? (optional)</label>
                    <select id="feel" name="feel">
                      <option value="">Select…</option>
                      <option value="great-energy">Great energy</option>
                      <option value="steady">Steady / normal</option>
                      <option value="sluggish">Sluggish</option>
                      <option value="stomach-issues">Stomach issues</option>
                      <option value="cramping">Cramping</option>
                    </select>
                  </div>
                </div>

                <!-- SECTION: Fruit & Veg Varieties -->
                <div class="form-row">
                  <div class="field-group">
                    <label for="varieties">Fruit & veg varieties in this meal</label>
                    <input
                      id="varieties"
                      name="varieties"
                      type="text"
                      autocomplete="off"
                      placeholder="e.g. banana, blueberries, spinach"
                    />
                    <small class="field-hint">
                      List different fruits and vegetables, separated by commas.
                    </small>
                  </div>
                </div>

                <!-- SECTION: Linked recipe (optional) -->
                <div class="form-row">
                  <div class="field-group">
                    <label for="mealRecipe">Linked recipe (optional)</label>
                    <select id="mealRecipe" name="mealRecipe">
                      <option value="">No recipe</option>
                    </select>
                    <small class="field-hint">
                      Save recipes in the Recipe library, then link one here when you log a portion.
                    </small>
                  </div>
                </div>

                <div class="form-row">
                  <div class="field-group">
                    <label for="notes">Notes for coach (optional)</label>
                    <textarea
                      id="notes"
                      name="notes"
                      rows="2"
                      placeholder="Felt heavy on tempo run, might have been too close to workout."
                    ></textarea>
                  </div>
                </div>

                <!-- SECTION: Form Actions -->
                <div class="form-actions">
                  <button type="submit" class="btn btn-primary">Add meal</button>
                  <button type="reset" class="btn btn-ghost">Clear</button>
                </div>
              </form>
            </section>

            <!-- SECTION: Recipe Library -->
            <section class="card card-recipes" aria-labelledby="recipeLibraryHeading">
              <header class="card-header card-header-inline">
                <div>
                  <h2 id="recipeLibraryHeading">Recipe library</h2>
                  <p class="card-support-text">
                    Save go-to meals by URL so you and your coach can reference them.
                  </p>
                </div>
              </header>

              <form id="recipeForm" class="recipe-form">
                <div class="form-row">
                  <div class="field-group">
                    <label for="recipeName">Recipe name</label>
                    <input
                      id="recipeName"
                      name="recipeName"
                      type="text"
                      autocomplete="off"
                      placeholder="Overnight oats with berries"
                    />
                  </div>
                </div>
                <div class="form-row">
                  <div class="field-group">
                    <label for="recipeUrl">Recipe URL</label>
                    <input
                      id="recipeUrl"
                      name="recipeUrl"
                      type="url"
                      autocomplete="off"
                      placeholder="https://example.com/your-recipe"
                    />
                  </div>
                </div>
                <div class="form-actions">
                  <button type="submit" class="btn btn-secondary">Save recipe</button>
                </div>
              </form>

              <div id="recipeEmptyState" class="empty-state">
                <p>No recipes saved yet. Add a recipe URL to build your library.</p>
              </div>
              <ul id="recipeList" class="recipe-list"></ul>
            </section>

            <!-- SECTION: Athlete Log Panel -->
            <section class="card card-log" aria-labelledby="athleteLogHeading">
              <header class="card-header card-header-inline">
                <div>
                  <h2 id="athleteLogHeading">Todays meals</h2>
                  <p class="card-support-text">
                    Quick snapshot of everything you logged.
                  </p>
                </div>
                <div class="log-summary" id="athleteSummary">
                  <span class="summary-pill" id="totalMeals">0 meals</span>
                  <span class="summary-pill" id="totalCalories">0 kcal</span>
                  <span class="summary-pill" id="athleteVarieties">0 / 30 varieties</span>
                </div>
              </header>

              <div id="athleteLogEmpty" class="empty-state">
                <p>No meals yet. Log your first meal to start your fuel journal.</p>
              </div>

              <ul id="athleteMealList" class="meal-list" aria-live="polite"></ul>
            </section>
          </div>
        </section>

        <!-- SECTION: Coach View -->
        <section
          id="coachView"
          class="panel"
          aria-label="Coach review view"
          aria-hidden="true"
        >
          <section class="card card-report" aria-labelledby="coachReportHeading">
            <header class="card-header card-header-inline">
              <div>
                <h2 id="coachReportHeading">Coach report</h2>
                <p class="card-support-text">
                  Read-only view optimised for sharing, screenshots, or printing to PDF.
                </p>
              </div>
              <div class="report-actions">
                <button id="printReportBtn" class="btn btn-secondary">
                  Print / Save as PDF
                </button>
              </div>
            </header>

              <div id="coachReportMeta" class="report-meta">
                <div>
                  <span class="meta-label">Athlete</span>
                  <span class="meta-value" id="coachAthleteName">Marathoner</span>
                </div>
                <div>
                  <span class="meta-label">Block</span>
                  <span class="meta-value" id="coachBlockLabel">Current week</span>
                </div>
                <div>
                  <span class="meta-label">Total meals</span>
                  <span class="meta-value" id="coachTotalMeals">0</span>
                </div>
                <div>
                  <span class="meta-label">Total calories</span>
                  <span class="meta-value" id="coachTotalCalories">0 kcal</span>
                </div>
                <div>
                  <span class="meta-label">Fruit & veg varieties (week)</span>
                  <span class="meta-value" id="coachVarieties">0 / 30</span>
                </div>
              </div>


            <!-- SECTION: Printable area -->
            <div id="coachPrintableArea" class="report-body">
              <table class="report-table">
                <thead>
                  <tr>
                    <th>Time</th>
                    <th>Meal</th>
                    <th>Type</th>
                    <th>Calories</th>
                    <th>Carbs</th>
                    <th>Protein</th>
                    <th>Fat</th>
                    <th>Felt</th>
                    <th>Recipe</th>
                    <th>Athlete notes</th>
                  </tr>
                </thead>
                <tbody id="coachMealTableBody">
                  <!-- Filled by JS -->
                </tbody>
              </table>

              <p class="print-tip">
                Tip: Use your browsers Print option and choose Save as PDF to download this report.
              </p>
            </div>
          </section>
        </section>
      </main>

      <!-- SECTION: Footer -->
      <footer class="app-footer">
        <p>
          Built for marathon training: fuel, log, review, repeat.
        </p>
      </footer>
    </div>

    <!-- SECTION: Scripts -->
    <script src="script.js"></script>
  </body>
</html>
